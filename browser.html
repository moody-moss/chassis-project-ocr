<!doctype html>
<html>

<body>

    <img id='img' crossorigin="anonymous" src='https://qwe-1.herokuapp.com/data-matrix.jpg'>Test Image</img>
    <p id="result" class="result"> Result </p>

    <!-- https://unpkg.com/@zxing/library@0.18.5/umd/index.js -->
    <script type="text/javascript" src="https://unpkg.com/@zxing/library@0.18.5/umd/index.js"></script>
    <script type="text/javascript">

        //-----------------------------------------------------------------------------

        window.addEventListener('load', function () {

            const codeReader = new ZXing.BrowserDatamatrixCodeReader()
            console.log('ZXing code reader initialized');
            const resultSN = document.getElementById('result')
            const img = document.getElementById('img')
            const decodeFun = (e) => {

                // DECODE DATA MATRIX
                codeReader.decodeFromImage(img)
                    .then(result => {
                        console.log(result)
                        resultSN.textContent = result.text
                        //console.log(`Started decode for image from ${img.src}`)
                    })
                    .catch(err => {
                        console.error(err);
                        resultSN.textContent = err
                    });


            };

            //document.getElementById('button').addEventListener('click', decodeFun)
            //window.onload(decodeFun)
            decodeFun()

        })

    </script>
</body>

</html>